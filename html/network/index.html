<!DOCTYPE html>
<html>
<body>
<head>
        <title></title>
        <script>
            function changeSrc(loc) {
			//document.getElementById('iframeId').save();
                document.getElementById('iframeId').src = loc;
            }

	function openInNewTab(url) {
	  var win = window.open(url, '_blank');
	  win.focus();
	}
      </script>

    <script type="text/javascript" src="sendContent.js"></script>

<script>
function save() {
savefiles(m);
}
</script>



<script>
if (typeof XMLHttpRequest === "undefined") {
    XMLHttpRequest = function () {
        try { return new ActiveXObject("Msxml2.XMLHTTP.6.0"); }
        catch (e) {}
        try { return new ActiveXObject("Msxml2.XMLHTTP.3.0"); }
        catch (e) {}
        try { return new ActiveXObject("Microsoft.XMLHTTP"); }
        catch (e) {}
        throw new Error("This browser does not support XMLHttpRequest.");
    };
}

function loadExample(file) {
    function reqListener () {
        //document.getElementById("editorTA").value = "teste";
        //txtinput = this.responseText;
	//editor.getDoc().setValue(this.responseText);

    }

    var filePath = "http://datacom.bipes.net.br:5000/examples/" + file + ".txt";

    var oReq = new XMLHttpRequest();
    oReq.onload = reqListener;
    oReq.open("get", filePath, true);
    oReq.send();
}
</script>





    </head>
    <body>

<center>
Lab DATACOM Remoto - DC - UFSCar - Network Console
</center>

<br>
<br>
Enter Raw Ethernet Frame contents to be sent to Arduino with W5100 Ethernet:

<br>
<br>

<!--
	Exemplos:
<button onclick="loadExample('blink');">Blink</button>
<button onclick="loadExample('ethernet');">Ethernet Raw</button>
-->





<span id="hexEdit">frame content</span>

	<script>hexEdit.innerHTML='<BR><input onchange=\'h="";with(new FileReader)readAsArrayBuffer(files[0]),onload=function(){for(i in u=new Uint8Array(result))h+=(0+u[i].toString(16)).slice(-2);m.value=h;m.oninput()}\'type=file id=w><button>load hex from file</button><br><table border><td><td id=t>00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F<tr><td id=l valign=top width=80>00000000<td><textarea spellcheck=false id=m oninput=\'b=value.substr(0,selectionStart).replace(/[^0-9A-F]/ig,"").replace(/(..)/g,"$1 ").length;value=value.replace(/[^0-9A-F]/ig,"").replace(/(..)/g,"$1 ").replace(/ $/,"").toUpperCase();style.height=1.5+value.length/48+"em";h="";for(i=0;i<value.length/48;i++)h+=(1E7+(16*i).toString(16)).slice(-8)+" ";l.innerHTML=h;h="";for(i=0;i<value.length;i+=3)c=parseInt(value.substr(i,2),16),h=63<c&&127>c?h+String.fromCharCode(c):h+".";r.innerHTML=h.replace(/(.{16})/g,"$1 ");" "==value[b]&&b--;setSelectionRange(b,b)\'cols=47>00</textarea><td id=r valign=top width=160>.</td><button onclick=\'y=[];(m.value+" ").replace(/(..) /g,function(a){y.push(parseInt(a,16))});location="data:application/octet-stream;base64,"+btoa(String.fromCharCode.apply(!1,new Uint8Array(y)))\'>save hex to file<style>*{margin:0;padding:0;font:1em/1em courier}#m{height:1.5em;resize:none}#t{padding:0 2px}#w{position:absolute;opacity:.001}'</script>


	<br>
	<br>
<button id="save" onclick="savefiles(m)">Send to server</button>
(must send to server before sending the packet (send to LAN button))
<br>

	<br>
<button onclick="changeSrc('send.php')">Send packet to LAN</button>

<br>
<br>

<p>Received packets - captured by tshark (at 00:26:18:5d:cc:40):
Filter: [TODO] 
<button onclick="changeSrc('tshark.php')">Start/Restart packet capture</button>
<br>

<iframe src="tshark.php" width="100%" height="350">
</iframe>



<!--
<p>An iframe with a thin black border:</p>
<iframe src="/default.asp" width="100%" height="300" style="border:1px solid black;">
</iframe>
-->

<hr>
Console:

<iframe id="iframeId" src="sendWait.php" width="100%" height="300" style="border:none;">
</iframe>

</body>
</html>



